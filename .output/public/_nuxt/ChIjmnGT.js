import{_ as b}from"./CrWvWvYr.js";import{_ as f,r as p,j as h,I as k,L as g,O as w,c as s,a as i,t as _,Q as C,R as N,o as a,b as T,w as $,d as B}from"#entry";const L={class:"section"},j={key:0,class:"container mx-auto px-4 py-8"},A={class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded"},S={key:1,class:"container mx-auto px-4 py-8"},V={key:2},E="published",F={__name:"index",async setup(I){let e,l;const d=p([]),r=p(null),u=p(!0),{$gtag:c}=h(),v=t=>t.slice(0,-5).replace(/T/g," "),m=t=>{c&&c("event","blog_click",{blog_title:t.content.name,blog_slug:t.slug,blog_intro:t.content.intro,blog_created_at:t.created_at,content_type:"therapy_blog",page_location:"blog_index"})};k(()=>{c&&c("event","blog_index_view",{total_posts:d.value.length,content_type:"therapy_blog_listing",page_location:"blog_index"})});const x=w();try{const t=([e,l]=g(()=>fetch(`https://api.storyblok.com/v2/cdn/stories?version=${E}&starts_with=blog/&sort_by=published_at:desc&token=${x.public.storyblokApiToken}`,{headers:{"Content-Type":"application/json"}})),e=await e,l(),e);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const o=([e,l]=g(()=>t.json()),e=await e,l(),e);o.stories&&o.stories.length>0?d.value=o.stories:r.value="No blog posts found"}catch{r.value="Failed to load blog posts. Please try again later."}finally{u.value=!1}return(t,o)=>{const y=b;return a(),s("div",L,[r.value?(a(),s("div",j,[i("div",A,_(r.value),1)])):u.value?(a(),s("div",S,[...o[0]||(o[0]=[i("div",{class:"text-center"},"Loading blog posts...",-1)])])):(a(),s("div",V,[(a(!0),s(C,null,N(d.value,n=>(a(),s("div",{key:n.content._uid,class:"container blog__overview"},[i("h2",null,[T(y,{class:"blog__detail-link",to:`/blog/${n.slug}`,onClick:R=>m(n)},{default:$(()=>[B(_(n.content.name),1)]),_:2},1032,["to","onClick"])]),i("small",null,_(v(n.created_at)),1),i("p",null,_(n.content.intro),1)]))),128))]))])}}},M=f(F,[["__scopeId","data-v-8fef50a1"]]);export{M as default};
